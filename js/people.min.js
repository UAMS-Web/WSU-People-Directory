!function(a,b,c){function d(){a(".wsu-people-lightbox").remove(),a("body > a, body > div").removeAttr("aria-hidden"),e&&e.focus()}a(b).ready(function(){a(".has-photo .photo img").each(function(){a(this).attr("src",a(this).data("photo"))})});var e,f=_.template(a("#wsu-person-lightbox-template").html());a(".lightbox").on("click",".name a, .card figure a",function(d){d.preventDefault();var g=a(this).closest(".wsu-person"),h=g.data("profile-id");a.ajax({url:c.wsu_people_rest_url+h}).done(function(c){e=b.activeElement,a("body > a, body > div").attr("aria-hidden","true"),a("body").append(f({name:g.find(".name").text(),photo:c.photos[0].medium,title:c.position_title,email:g.find(".email a").text(),phone:g.find(".phone").text(),office:g.find(".office").text(),address:g.find(".address").text(),website:g.find(".website a").attr("href"),content:c.content.rendered})),a("#wsu-person-name").focus()})}),a(b).keydown(function(b){if(9===b.which&&a(".wsu-people-lightbox").length){var c=a(".wsu-people-lightbox").find("a, button, [tabindex]:not([tabindex^='-'])"),d=c.index(a(":focus"));b.shiftKey&&0===d?(c[c.length-1].focus(),b.preventDefault()):event.shiftKey||d!==c.length-1||(c[0].focus(),b.preventDefault())}}),a("body").on("click",".wsu-people-lightbox-close",function(a){a.target===this&&d()}),a(b).keydown(function(a){27===a.which&&d()}),a(".wsu-people-filters .search").on("keyup","input",function(){var b=a(this).val(),c=a(this).closest(".wsu-people-wrapper").find(".wsu-person");b.length>0?c.each(function(){var c=a(this);-1===c.text().toLowerCase().indexOf(b.toLowerCase())?c.hide("fast").attr("aria-hidden","true"):c.show("fast").removeAttr("aria-hidden")}):c.show("fast")}),a(".wsu-people-filter-label").on("click",function(){var b="false"===a(this).attr("aria-expanded")?"true":"false";a(this).attr("aria-expanded",b).next("ul").slideToggle(250)}),a(".wsu-people-filter-terms").on("change","input:checkbox",function(){var b=[],c=a(this).closest(".wsu-people-wrapper").find(".wsu-person");a(".wsu-people-filter-terms input:checkbox:checked").each(function(){b.push("."+a(this).val())}),b.length>0?(c.not(b.join(",")).hide(250).attr("aria-hidden","true"),c.filter(b.join(",")).show(250).removeAttr("aria-hidden")):c.show(250).removeAttr("aria-hidden")})}(jQuery,document,window);